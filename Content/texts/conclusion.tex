\chapter{Conclusion}
\label{ch:conclusion}

Questionnaires and physiological measurements are the most common approach used to obtain data for emotion estimation in the field of HCI and games research. Both approaches interfere with the natural behavior of users, which affects any research procedure. Initiatives based on computer vision and remote extraction of user signals for emotion estimation exist, however they are limited. Experiments of such initiatives were performed under extremely controlled situations with few game-related stimuli. Users had a passive role with limited possibilities for interaction or emotional involvement, differently than game-based emotion stimuli, where users take an active role in the process, making decision and directly interacting with the media. Previous works also focus on predictive models based on a group perspective. As a consequence, a model is usually trained from data of several users, which in practice describes the average behavior of the group, excluding or diluting key individualities of each user.

In that light, there is a lack of initiatives focusing on non-obtrusive, user-tailored emotion detection models, in particular regarding stress and boredom, within the context of games research that are based on emotion data generated from game stimuli. This thesis aimed to fill that gap, providing the HCI and the games research community with an emotion detection process that can be used to remotely study users emotions in a non-obtrusive way within the context of games.

\section{Fulfillment of research objectives}

As detailed in Section \ref{sec:research-aim}, a set of research objectives have being identified to support the overall aim of this thesis. Each one of those objectives is detailed below, along with the conclusion reached from their fulfillment.

\textit{\textbf{O1: identification of the main concepts, theories and signals associated with the psychophysiological profile of users and their emotions within the field of HCI, particularly regarding games research. The outcome of this objective is a definition of stress and boredom within the context of this research, as well as the identification of which psychophysiological signals are commonly applied to emotion detection.}}

The literature review detailed in Chapters \ref{ch:literature-games}, \ref{ch:literature-face}, and \ref{ch:literature-physiological} presents the theoretical background related to psychophysiological signals and emotions. Different theories have been proposed to model and study emotions in a variety of contexts, including those related to games. For this thesis, focus has been given to those theories based on human physiology connecting emotional reactions to psychophysiological signals, e.g. HR and facial activity.

\textit{\textbf{O2: identification of existing computer vision techniques that can be employed to remotely extract the identified psychophysiological signals of users via analysis of videos. The investigation includes the analysis of how existing techniques are being applied to emotion detection. The set of signals to be remotely extracted is based on the results of objective \textbf{O1}.}}

Remote sensing of psychophysiological signals was an essential part of this research. Chapter \ref{ch:literature-rppg} detailed the progress that has been made in the remote estimation of physiological signals, particularly the use of rPPG to estimate HR. The rPPG technique proposed by \textcite{poh2011advancements} has been selected as the most appropriate for remote estimation of HR in the context of this thesis. It was motivated by the statistical nature of ICA, an important component of the selected rPPG technique. Use of signal filtering via ICA allows the method to better deal with noise caused by motion, which is common in a context involving games and natural behavior. Additionally several computer vision techniques for facial detection were studied and a novel method for automated analysis of facial cues from videos was developed, as explained in Section \ref{sec:experiment1-study4}. Empirical results of such method show its potential for detecting stress and boredom of players in games. The method is based on Euclidean distances between automatically detected facial points, designed to be robust enough to correctly perform facial analysis even when users are naturally interacting with games. Additionally analysis of user behavior focused on facial actions indicate that a neutral face remains for longer periods of time during boring periods. Finally, for the context of this thesis, facial analysis on an individual level produced more information to connect facial activity to emotional states of stress and boredom.

\textit{\textbf{O3: investigation of the feasibility, accuracy and challenges of applying the identified computer vision techniques regarding the extraction of the signals within the context of computer games. This objective also comprehends the analysis of the behavior of players during gaming sessions and how it affects the technique.}}

Extensive evaluations were conducted to establish the reliability of remote HR measurements. Analysis of the accuracy of remote HR estimations clearly established the limitations of the rPPG technique, showing how it is affected by user behavior. Evaluation results of the rPPG technique, as detailed in Section \ref{sec:experiment1-study3}, have shown the average estimation error of the technique in the context of this research. The error, however, lies within the range that still allows the identification of HR variations caused by emotion elicitation materials, as detailed in Section \ref{sec:experiment1-study2}. The evaluations of the identified computer vision techniques has shown that it is feasible to remotely extract HR and facial data from video recordings of users interacting with games with the purpose of classify emotional states.

%As presented in Section \ref{sec:experiment1-study3} (one page \pageref{sec:experiment1-study3}), rPPG estimations of HR are sensitive to noise caused by movement, facial expressions or changes in illumination (e.g. screen activity reflected on user's face), which are all likely to happen in gaming sessions.

\textit{\textbf{O4: investigation and validation of the concept of a game-based calibration phase as an emotional elicitation source able to provide data to fit a user-tailored predictive model. The result of this objective is to design and validate a set of calibration games that can trigger the emotional responses required for the analysis of the remotely obtained signals and detection of boredom/stress levels by the model.}}

This research introduced the novel idea of calibration games. As detailed in Section \ref{sec:experiment1-games-elicitation}, calibration games are carefully designed games that have a difficulty level that constantly and linearly progresses over time without a pre-defined stopping point. Such design of emotion elicitation material accounts for the different expectations and gaming skill of a wide range of users, making the process more focused on the individual rather than on the group. Sections \ref{sec:experiment1-study1} and \ref{sec:experiment1-study2} presented a detailed analysis regarding how responses of psychophysiological activity, i.e. HR and facial actions, relate to emotional states in a context featuring calibration games. Results show that a calibration game is a valid emotion elicitation material which indeed induce emotional states of stress and boredom.

\textit{\textbf{O5: proposal of a user-tailored, multifactorial model that uses the identified physiological and non-physiological signals, the computer vision technique and the calibration data to detect the current stress and boredom levels of a person while he/she plays any video game.}}

The knowledge obtained with the investigation of the previously mentioned objectives culminated in the final design of the proposed method for emotion detection. Such method, which is non-obtrusive, user-tailored and game-based, was evaluated in the first conducted experiment, as detailed in Section \ref{sec:experiment1-study5}. Despite the small sample size of such experiment, results suggested the feasibility of a user-tailored, multifactorial model to detect emotional states of boredom and stress.

\textit{\textbf{O6: experimental validation of the proposed emotion detection process with an experiment involving a commercial off-the-shelf game.}}

Finally the proposed method was validated in a second experiment using a larger sample size, as detailed in Chapter \ref{ch:experiment2}. The game Infinite Mario, similar to the commercial off-the-shelf game Super Mario, was used in the process. Results show that the proposed method was able to identify the emotional state of subjects with a mean accuracy of 61.6\%.

\section{Answering the research question}

The fulfillment of the previously mentioned research objectives culminated in the answer of the research question that guided this thesis. As presented in Chapter \ref{c:introduction}, the research question is:

\begin{fquote}
How can the emotional state of players during the interaction with games be remotely detected on a user-tailored basis with the utilization of an ordinary camera and games as emotion elicitation sources for calibration?
\end{fquote}

The process of fulfilling each research objective and consequentially answering the proposed research question involved a series of systematic evaluations conducted to understand the relation between psychophysiological signals and emotions. Based on a literature review, facial behavior and physiological signals, i.e. HR, were selected as indicators of the emotional state. Results of the research presented in this thesis show that individualities can be detected regarding facial activity, e.g. increased number of facial actions during the stressful part of games. Regarding physiological signals, findings are aligned with and reinforce previous research that indicate higher HR mean during stressful situations in a gaming context. Results also suggest that changes in HR during gaming sessions is a promising indicator of stress.

All previously mentioned research objectives and the findings related to them culminated in the creation of a non-obtrusive, user-tailored and game-based method for emotion detection. The approach uses remotely acquired signals, namely HR and facial actions, to create a user-tailored model, i.e. trained neural network, able to detect emotional states of boredom and stress of a given subject. The approach is composed of two phases: training (or calibration) and testing. In the training phase, the model is trained using a user-tailored approach, i.e. data from subject $S_a$ playing 3 calibration games (Mushroom, Platformer and Tetris) is used to create model $N_a$. Calibration games are a novel emotion elicitation material introduced by this research. They are games carefully designed to present a difficulty level that constantly and linearly progresses over time without a pre-defined stopping point, inducing emotional states of boredom and stress. The result of the training phase is a user-tailored model, i.e. model $N_a$, which is a trained neural network aimed to be used on subject $S_a$. Finally the testing phase happens in a game session involving subject $S_a$ playing any ordinary, non-calibration game, e.g. Super Mario. During the testing phase, subject's $S_a$ signals are remotely acquired and fed into the previously trained model $N_a$, which outputs the estimated emotional state of subject $S_a$ for that particular testing game.

The feasibility of the proposed method was experimentally evaluated in two distinct experiments. In the final evaluation of the method, the previously mentioned calibration games, i.e. Mushroom, Platformer and Tetris, were used as emotion elicitation materials to train a user-tailored model, i.e. neural network. Such model was then used to detect the emotional state of each user during the interaction with a fourth game, i.e. Infinite Mario. The proposed method was able to identify the emotional state of subjects with a mean accuracy of 61.6\%. Results confirmed with statistical significance that the proposed method indeed classified emotional states, achieving an accuracy rate better than chance-level classification.

\section{Closing remarks}

The proposed method for remote detection of emotions has been conceived based on established theories and it has been carefully evaluated in experimental setups. As mentioned in Chapter \ref{ch:discussion}, the process of detecting emotions of users is a complex tasks that involves theories and contributions from different fields. Results presented in this thesis prove the method is feasible, however existing limitations prevent its wide use by researcher and companies in its current configuration. Nevertheless it is a solid initiative to move away from questionnaires and physical sensors into a non-obtrusive, remote-based solution for evaluation of user emotions.

%calibration games. At the beginning the games are highly predictive, without novelties, changes or surprises and with emphasis on the passage of time during a wait, which leads to an emotional state of boredom \parencite{van2010behave,koster2013theory,schell2014art}. The game difficulty is then periodically increased until the subject is not able to cope with the challenges at hand, which happens at different times for different users. The ever-growing game difficulty leads to an emotional state of stress towards the end of the interaction, accounting for the different expectations and gaming skill of a wide range of users.

%The previously mentioned findings were incorporated into a machine learning model, i.e. neural network, aimed at emotion detection. As pointed out by previous work, a user-tailored model based on several signals, e.g. HR and facial activity, is more likely to detect emotional states of users. An experiment has validated and shown how accurate is the proposed emotion detection approach that uses remotely acquired signals, i.e. heart rate and facial actions, and machine learning to detect emotional states of stress and boredom on a user-tailored basis. In order to test the method, calibration games, i.e. Mushroom, Platformer and Tetris, have been used as emotion elicitation material. A fourth game, i.e. Infinite Mario, has been used as an evaluation game. Some levels of Infinite Mario were adjusted to be more likely perceived as stressful or boring by subjects, so the proposed method could be evaluated detecting such differences in the emotional state. Results with statistical significance confirm that the adjustments applied to some levels of Infinite Mario indeed caused a particular emotional state in the subjects.

%Regarding the evaluation of the emotion classification, the proposed method was able to identify the emotional state of subjects with a mean accuracy of 61.6\%. Achieved accuracy confirms with statistical significance that the proposed method performs better than a calculated chance-level estimation of 60\%. Despite the fact that a mean classification accuracy of 61.6\% is better than chance-level rate, it is still below the mean classification accuracy achieved in other affective computing studies, i.e. 77.91\%.

%The literature reviews, the experiments conducted so far and the planned future tasks support the idea of using a set of signals, e.g. facial activity, body movement, and HR estimations as sources of information in a multifactorial analysis for the identification of stress and boredom in games. It will produce a novel user-tailored approach for emotion detection focused on the behavioral particularities of each user instead of the average group pattern. The proposed approach will be implemented as a software tool, which can be used by researchers and practitioners within games research.
