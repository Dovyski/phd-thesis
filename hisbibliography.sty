%%
%% Copyright 2016-2017 by Thomas Fischer <thomas.fischer@his.se>
%%
%% This file has been released under the following license:
%% Creative Commons Attribution-Share Alike 4.0 Unported
%% (CC-BY-SA 4.0)
%%

\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{hisbibliography}[2016/11/14 HiS Bibliography]

\RequirePackage[backend=biber,style=authoryear]{biblatex}

% Comma between author and year when citing
\renewcommand{\nameyeardelim}{\addcomma\addspace}

% This bibliography will be used for the list of
% previous PhD/licentiate publications as generated
% by the command \dissertationlist
% The filename may be different, important is the
% label which has to equal 'dissertation-series'.
% All publications in this bibliography will be
% printed, no \cite or \nocite command is necessary.
\addbibresource[label=dissertation-series]{dissertation-series.bib}

%% Prints the list of previous dissertations published
%% in the same series. The list of dissertations is
%% determined by the references labeled 'dissertation-series'
\newcommand\dissertationlist{%
\part*{Publications in the Dissertation~Series}% List of references is an unnumbered Part
\addcontentsline{toc}{part}{Publications in the Dissertation Series}% manually add this unnumbered Part to ToC (not automatically as it is the star'ed version)
\markboth{}{\uppercase{Publications in the Dissertation Series}}% fix headings (odd pages 'Publications in the Dissertation Series', even pages empty)
\begingroup
\defbibheading{subbibliography}{%
% No title, purple-colored page right before bibliography
}
\begin{refsection}[dissertation-series]
\nocite{*}
\begin{refcontext}[sorting=ynt]
\printbibliography[heading=subbibliography]
\end{refcontext}
\end{refsection}
\endgroup

}%

%% List of References as cited by the disseration
%% author in his/her report. Essentially a nice
%% wrapper around \printbibliography.
\newcommand{\listofreferences}{%
\part*{\refname}% List of references is an unnumbered Part
\addcontentsline{toc}{part}{\refname}% manually add this unnumbered Part to ToC (not automatically as it is the star'ed version)
\markboth{}{\uppercase{\refname}}% fix headings (odd pages 'References', even pages empty)
\begingroup%
\defbibheading{subbibliography}{%
% No title, purple-colored page (generated by \part*) right before bibliography
}
\begin{refcontext}[sorting=nyt]
\printbibliography[heading=subbibliography]
\end{refcontext}
\endgroup
}% end of \listofreferences
